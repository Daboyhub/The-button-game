<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Everything Button - Maximum Chaos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tone.js for sound effects -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&family=Cutive+Mono&family=Handjet:wght@400&display=swap');

        /* Default Font and CSS Variables for Font Swap */
        :root {
            --main-font: 'Inter', sans-serif;
        }
        .font-inter { --main-font: 'Inter', sans-serif; }
        .font-comic { --main-font: 'Comic Neue', cursive; }
        .font-mono-special { --main-font: 'Cutive Mono', monospace; }
        .font-handjet { --main-font: 'Handjet', cursive; }

        body {
            font-family: var(--main-font);
            background-color: #f0f4f8;
            transition: background-color 0.5s ease, filter 0.5s ease, transform 0.3s ease; /* Added transform */
            position: relative; 
            overflow: hidden; 
        }

        /* Custom Styles for the Button */
        #chaosButton {
            transition: all 0.15s ease-in-out;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            font-size: 2rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        #chaosButton:active {
            transform: scale(0.95);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }

        /* Dynamic Classes for the Game */
        .fast-spin { animation: spin 0.5s infinite linear; }
        .slow-pulse { animation: pulse 2s infinite ease-in-out; }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.8; } 100% { transform: scale(1); opacity: 1; } }

        /* Style for the random content output */
        #randomOutput {
            min-height: 150px; 
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background-color: #fef9e7; 
        }
        #randomOutput .text-answer {
            color: transparent; 
            transition: all 0.3s ease-in-out;
            cursor: help; 
        }
        #randomOutput .text-answer:hover {
            color: #0c4a6e; 
            text-shadow: 0 0 5px rgba(0,0,0,0.1);
        }
        
        .follower-box {
            position: fixed;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            opacity: 0.9;
            pointer-events: none; 
            z-index: 1000;
            transition: opacity 0.5s;
        }
        /* Canvas Styling */
        .ephemeral-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 999;
            opacity: 1;
            transition: opacity 1s ease-out;
        }

    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 font-inter">

    <div class="w-full max-w-lg bg-white rounded-3xl p-6 md:p-10 shadow-2xl text-center z-50">
        <h1 id="mainTitle" class="text-4xl font-extrabold mb-4 text-gray-800">The Everything Button</h1>
        <p class="text-gray-600 mb-8">Press it. Now.</p>

        <!-- The Main Button -->
        <button id="chaosButton" class="w-full py-6 rounded-2xl text-white font-bold bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-500/50">
            PRESS THE CHAOS BUTTON
        </button>

        <!-- Dynamic Random Content Output Area -->
        <div id="randomOutput" class="mt-8 p-4 border border-indigo-200 rounded-xl shadow-inner transition duration-500 ease-in-out">
            <p class="text-xl text-gray-500">Awaiting input for maximum chaos...</p>
        </div>
    </div>

    <script>
        // === Tone.js Setup ===
        let isAudioReady = false;
        const synth = new Tone.Synth().toDestination();
        const noise = new Tone.NoiseSynth({
            noise: { type: "white" },
            envelope: { attack: 0.005, decay: 0.1, sustain: 0, release: 0.1 }
        }).toDestination();
        
        const startAudioContext = async () => {
            if (!isAudioReady) {
                try {
                    await Tone.start();
                    isAudioReady = true;
                } catch (e) {
                    console.error("Could not start audio context:", e);
                }
            }
        };

        // === Core Variables ===
        const button = document.getElementById('chaosButton');
        const body = document.body;
        const mainTitle = document.getElementById('mainTitle');
        const randomOutput = document.getElementById('randomOutput');
        const defaultButtonText = 'PRESS THE CHAOS BUTTON';
        
        button.textContent = defaultButtonText;

        // Function to generate a random HEX color
        const getRandomColor = () => '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');

        // Function to reset visual elements after a delay
        const resetVisuals = () => {
            // Remove all dynamic classes and filters
            body.classList.remove('slow-pulse', 'font-comic', 'font-mono-special', 'font-handjet');
            body.classList.add('font-inter'); // Reset to default font
            button.classList.remove('fast-spin');
            
            // Reset button and title text (to undo text reversal)
            button.textContent = defaultButtonText;
            mainTitle.textContent = 'The Everything Button';

            // Reset styles
            button.style.transform = 'scale(1)';
            button.style.fontSize = '2rem';
            button.style.boxShadow = '0 10px 20px rgba(0, 0, 0, 0.2)';

            // NEW RESET FOR CHAOS
            body.style.filter = 'none'; 
            body.style.transform = 'none'; // Added for Page Tilt reset
            
            // Reset button position (especially after teleport)
            button.style.position = ''; 
            button.style.left = '';
            button.style.top = '';
            button.style.zIndex = '';
        };
        
        // Function to clear existing content
        const clearContent = () => {
            randomOutput.innerHTML = '';
            randomOutput.className = 'mt-8 p-4 border border-indigo-200 rounded-xl shadow-inner transition duration-500 ease-in-out';
            randomOutput.style.backgroundColor = '#fef9e7';
        };

        // --- CONTENT/INTERACTIVE EVENTS (Run one per click) ---
        const contentEvents = [
            // Existing Content Events (1-9)
            {
                name: "Random Funny Quote",
                action: () => {
                    const quotes = ["I used to think I was indecisive, but now I'm not so sure.", "If you are what you eat, then I am mostly pizza and existential dread.", "The mitochondria is the powerhouse of the cell. (Mandatory meme content.)"];
                    const quote = quotes[Math.floor(Math.random() * quotes.length)];
                    randomOutput.innerHTML = `<p class="text-content text-2xl italic font-serif text-gray-800">"${quote}"</p>`;
                }
            },
            {
                name: "Meme Placeholder Photo",
                action: () => {
                    const placeholders = [{ w: 300, h: 300, text: "Wait, That's Illegal" }, { w: 400, h: 200, text: "Unexpected Item in Bagging Area" }];
                    const item = placeholders[Math.floor(Math.random() * placeholders.length)];
                    const imageUrl = `https://placehold.co/${item.w}x${item.h}/1e40a0/ffffff?text=${item.text.replace(/ /g, '+')}`;
                    randomOutput.innerHTML = `<img src="${imageUrl}" onerror="this.onerror=null;this.src='https://placehold.co/300x300/ff0000/ffffff?text=Image+Load+Error'" alt="Funny Placeholder" title="${item.text}">`;
                }
            },
            {
                name: "ASCII Art Surprise",
                action: () => {
                    const asciiArt = [`<pre class="font-mono text-lg text-green-700"> ( ‚Ä¢_‚Ä¢)\n ( ‡∏á )‡∏á\n /  \\</pre>`, `<pre class="font-mono text-base text-purple-700"> _/|\n/  |\n|  |\n|  |\n|_/\n</pre>`];
                    const art = asciiArt[Math.floor(Math.random() * asciiArt.length)];
                    randomOutput.innerHTML = `<div class="text-center">${art}</div>`;
                    randomOutput.style.backgroundColor = '#f3e8ff'; 
                }
            },
            {
                name: "Unexpected Fun Fact",
                action: () => {
                    const facts = ["A group of flamingos is called a 'flamboyance.'", "Octopuses have three hearts.", "Honey never spoils."];
                    const fact = facts[Math.floor(Math.random() * facts.length)];
                    randomOutput.innerHTML = `<div class="text-content text-xl font-bold text-teal-700">ü§Ø Fun Fact:</div><p class="text-base text-teal-600">${fact}</p>`;
                    randomOutput.style.backgroundColor = '#ccfbf1'; 
                }
            },
            {
                name: "Wholesome Encouragement",
                action: () => {
                    const messages = ["You are doing great! Keep up the awesome work!", "Someone is proud of you today (it's me!).", "Your creativity is shining brighter than a supernova!"];
                    const message = messages[Math.floor(Math.random() * messages.length)];
                    randomOutput.innerHTML = `<div class="text-content text-2xl font-extrabold text-pink-600">üíñ Positive Vibes!</div><p class="text-xl text-pink-500">${message}</p>`;
                    randomOutput.style.backgroundColor = '#fce7f6'; 
                }
            },
            {
                name: "Simple Joke/Riddle",
                action: () => {
                    const jokes = [{ q: "Why did the scarecrow win an award?", a: "Because he was outstanding in his field!" }, { q: "What do you call a fake noodle?", a: "An impasta." }];
                    const joke = jokes[Math.floor(Math.random() * jokes.length)];
                    randomOutput.innerHTML = `<div class="text-content text-center"><p class="text-xl font-medium text-blue-700 mb-2">‚ùì ${joke.q}</p><p class="text-sm italic text-blue-500 mt-2">(Hover over the text below for the answer!)</p><p class="text-answer font-bold text-lg">ANSWER: ${joke.a}</p></div>`;
                    randomOutput.style.backgroundColor = '#dbeafe'; 
                }
            },
            {
                name: "Pirate Talk",
                action: () => {
                    const phrases = ["Ahoy, matey! Shiver me timbers!", "Where be the rum, ye landlubber?", "Aarrr! That's a fine click ye got there."];
                    const phrase = phrases[Math.floor(Math.random() * phrases.length)];
                    randomOutput.innerHTML = `<div class="text-content text-2xl font-extrabold text-amber-700">üè¥‚Äç‚ò†Ô∏è Pirate Mode:</div><p class="text-xl italic text-amber-600">${phrase}</p>`;
                    randomOutput.style.backgroundColor = '#fef3c7'; 
                }
            },
            {
                name: "Programming Humor",
                action: () => {
                    const jokes = ["Why do programmers prefer dark mode? Because light attracts bugs!", "There are 10 types of people in the world: those who understand binary, and those who don't."];
                    const joke = jokes[Math.floor(Math.random() * jokes.length)];
                    randomOutput.innerHTML = `<div class="text-content text-xl font-mono text-red-700">üêõ Error Message:</div><p class="text-base text-red-600">${joke}</p>`;
                    randomOutput.style.backgroundColor = '#fee2e2'; 
                }
            },
            {
                name: "Random Emojis",
                action: () => {
                    const emojis = ["üöÄ", "üçï", "ü¶Ñ", "üëΩ", "üëæ", "‚ú®", "üî•", "üåà", "üëë", "üåÆ", "üóø", "üíÄ", "üßê"];
                    let emojiString = '';
                    for (let i = 0; i < 5; i++) {
                        emojiString += emojis[Math.floor(Math.random() * emojis.length)];
                    }
                    randomOutput.innerHTML = `<div class="text-content text-5xl">${emojiString}</div>`;
                    randomOutput.style.backgroundColor = '#e0f2f1'; 
                }
            },
            // Interactive Events (10-11)
            {
                name: "Annoying Follower",
                action: () => {
                    randomOutput.innerHTML = `<div class="text-content text-xl font-bold text-gray-700">üëÄ Watch out! Something is following you...</div>`;
                    const follower = document.createElement('div');
                    follower.className = 'follower-box shadow-xl';
                    follower.style.backgroundColor = getRandomColor();
                    follower.style.left = `${Math.random() * 90}vw`;
                    follower.style.top = `${Math.random() * 90}vh`;
                    follower.innerHTML = 'üö®';
                    document.body.appendChild(follower);

                    const moveFollower = (e) => {
                        const speed = 0.05; 
                        const rect = follower.getBoundingClientRect();
                        const fX = rect.left;
                        const fY = rect.top;
                        
                        const newX = fX + (e.clientX - fX) * speed;
                        const newY = fY + (e.clientY - fY) * speed;

                        follower.style.left = `${newX}px`;
                        follower.style.top = `${newY}px`;
                    };

                    document.addEventListener('mousemove', moveFollower);

                    setTimeout(() => {
                        follower.style.opacity = '0';
                        document.removeEventListener('mousemove', moveFollower);
                        setTimeout(() => follower.remove(), 500);
                    }, 3000);
                }
            },
            {
                name: "Hidden Message Pop-up",
                action: () => {
                    const messages = ["You found me!", "The cake is a lie.", "Hello from the corner!", "Don't click me!"];
                    const msg = messages[Math.floor(Math.random() * messages.length)];
                    randomOutput.innerHTML = `<div class="text-content text-xl font-bold text-gray-700">A mysterious box has appeared!</div>`;

                    const popup = document.createElement('div');
                    popup.className = 'absolute p-2 bg-yellow-400 text-black text-xs font-bold rounded-lg shadow-xl cursor-pointer hover:scale-105 transition';
                    popup.style.left = `${Math.random() * 80 + 10}vw`; 
                    popup.style.top = `${Math.random() * 80 + 10}vh`; 
                    popup.style.zIndex = '1000';
                    popup.innerHTML = `[Click to dismiss: ${msg}]`;
                    
                    popup.onclick = () => { popup.remove(); };
                    document.body.appendChild(popup);

                    setTimeout(() => popup.remove(), 5000);
                }
            },
            // Content Event (12)
            {
                name: "Ephemeral Canvas Art",
                action: () => {
                    randomOutput.innerHTML = `<div class="text-content text-xl font-bold text-indigo-700">üñºÔ∏è Abstract Art Generated! (Look around)</div>`;
                    
                    const canvas = document.createElement('canvas');
                    canvas.className = 'ephemeral-canvas';
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    document.body.appendChild(canvas);
                    
                    const ctx = canvas.getContext('2d');
                    
                    // Draw random shape
                    ctx.fillStyle = getRandomColor();
                    ctx.globalAlpha = 0.5; // Make it semi-transparent

                    const centerX = Math.random() * canvas.width;
                    const centerY = Math.random() * canvas.height;
                    const size = Math.random() * 100 + 50;

                    if (Math.random() > 0.5) {
                        // Draw a circle
                        ctx.beginPath();
                        ctx.arc(centerX, centerY, size / 2, 0, Math.PI * 2);
                        ctx.fill();
                    } else {
                        // Draw a rotating square
                        ctx.translate(centerX, centerY);
                        ctx.rotate(Math.random() * Math.PI);
                        ctx.fillRect(-size / 2, -size / 2, size, size);
                    }

                    // Fade and remove after 1.5 seconds
                    setTimeout(() => {
                        canvas.style.opacity = '0';
                        setTimeout(() => canvas.remove(), 1000);
                    }, 1500);
                }
            },
            // NEW INTERACTIVE EVENT: Button Teleport (13)
            {
                name: "Button Teleport",
                action: () => {
                    randomOutput.innerHTML = `<div class="text-content text-xl font-bold text-red-600">‚ö†Ô∏è Button Relocating! Click Fast!</div>`;

                    // Store current styles to restore later
                    const originalPosition = {
                        position: button.style.position,
                        left: button.style.left,
                        top: button.style.top,
                    };
                    
                    // Set up button for teleporting
                    button.style.position = 'fixed'; // Must be fixed to jump out of its container
                    button.style.zIndex = '1001';
                    button.style.transition = 'none'; // Instant jump

                    // Jump to a random position (safe margins included)
                    const newX = Math.random() * (window.innerWidth * 0.8 - button.offsetWidth);
                    const newY = Math.random() * (window.innerHeight * 0.8 - button.offsetHeight);
                    
                    button.style.left = `${newX + window.innerWidth * 0.1}px`;
                    button.style.top = `${newY + window.innerHeight * 0.1}px`;

                    // Move it back after 0.5 seconds
                    setTimeout(() => {
                        // Restore original styles
                        button.style.position = originalPosition.position;
                        button.style.left = originalPosition.left;
                        button.style.top = originalPosition.top;
                        button.style.zIndex = '';
                        button.style.transition = 'all 0.15s ease-in-out'; // Restore transition defined in CSS
                    }, 500);
                }
            }
        ];

        // --- VISUAL/AUDIO EVENTS (Run 1-3 per click) ---
        const visualEvents = [
            // Existing Visual Events (1-4)
            { name: "Button Color Shift", action: () => { const color = getRandomColor(); button.style.backgroundColor = color; button.style.color = 'white'; } },
            { name: "Brief Background Flash", action: () => { const color = getRandomColor(); body.style.backgroundColor = color; setTimeout(() => { body.style.backgroundColor = '#f0f4f8'; }, 300); } },
            { name: "Text Size Jolt", action: () => { const randomSize = Math.floor(Math.random() * 20) + 16; button.style.fontSize = `${randomSize}px`; } },
            { name: "Quick Spin and Rebound", action: () => { button.classList.add('fast-spin'); setTimeout(() => { button.classList.remove('fast-spin'); }, 800); } },
            
            // CSS Filter Events (5-6)
            {
                name: "Invert Colors",
                action: () => { body.style.filter = 'invert(100%)'; setTimeout(() => { body.style.filter = 'none'; }, 400); }
            },
            {
                name: "Random Blur",
                action: () => { const blurAmount = Math.floor(Math.random() * 5) + 2; body.style.filter = `blur(${blurAmount}px)`; setTimeout(() => { body.style.filter = 'none'; }, 500); }
            },
            
            // Audio Events (7-8)
            { name: "Sci-Fi Zap Sound", action: () => { if (isAudioReady) { synth.triggerAttackRelease("C5", "8n"); } } },
            { name: "Low Riser Sound", action: () => { if (isAudioReady) { noise.triggerAttackRelease("4n", "+0.1"); } } },

            // Text/Font Events (9-11)
            {
                name: "Reverse Text",
                action: () => {
                    const reverseString = (str) => str.split('').reverse().join('');
                    button.textContent = reverseString(defaultButtonText);
                    mainTitle.textContent = reverseString(mainTitle.textContent);

                    setTimeout(() => {
                        button.textContent = defaultButtonText;
                        mainTitle.textContent = 'The Everything Button';
                    }, 500);
                }
            },
            {
                name: "Font Swap",
                action: () => {
                    const fonts = ['font-comic', 'font-mono-special', 'font-handjet'];
                    const randomFont = fonts[Math.floor(Math.random() * fonts.length)];
                    
                    body.classList.remove('font-inter', 'font-comic', 'font-mono-special', 'font-handjet');
                    body.classList.add(randomFont);

                    setTimeout(() => {
                        body.classList.remove(randomFont);
                        body.classList.add('font-inter');
                    }, 1000);
                }
            },
            {
                name: "Quick Bounce",
                action: () => {
                    button.style.transform = 'translateY(-10px)';
                    setTimeout(() => {
                        button.style.transform = 'translateY(0)';
                    }, 100);
                }
            },
            // NEW VISUAL EVENT: Page Tilt (12)
            {
                name: "Page Tilt",
                action: () => {
                    const tilt = Math.random() > 0.5 ? '5deg' : '-5deg';
                    body.style.transform = `rotate(${tilt})`;
                    setTimeout(() => {
                        body.style.transform = 'none';
                    }, 300);
                }
            },
            // NEW AUDIO: Random High Note (13)
            {
                name: "Random High Note Sound",
                action: () => {
                    if (isAudioReady) {
                        const notes = ["C6", "E6", "G6", "B6", "D7"];
                        const randomNote = notes[Math.floor(Math.random() * notes.length)];
                        synth.triggerAttackRelease(randomNote, "16n");
                    }
                }
            }
        ];

        // === Event Listener ===
        button.addEventListener('click', () => {
            startAudioContext(); 
            
            if (button.disabled) return; 

            // 1. Reset temporary visual elements
            resetVisuals();
            
            // 2. Clear previous random content
            clearContent();

            // 3. Determine how many visual events will fire (1 to 3 events)
            const numVisualEvents = Math.floor(Math.random() * 3) + 1; 
            
            // 4. Run the visual/audio chaos
            for (let i = 0; i < numVisualEvents; i++) {
                const randomIndex = Math.floor(Math.random() * visualEvents.length);
                visualEvents[randomIndex].action(); 
            }

            // 5. Always run ONE content/interactive event 
            const contentIndex = Math.floor(Math.random() * contentEvents.length);
            contentEvents[contentIndex].action();
            
            // 6. Add a small temporary lock
            button.disabled = true;
            setTimeout(() => {
                button.disabled = false;
            }, 500); 
        });
    </script>
</body>
</html>
